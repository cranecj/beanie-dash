<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beanie Dash - Audio Generator</title>
    <style>
        body {
            font-family: monospace;
            background: #0a0a0a;
            color: #00ffff;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            color: #ff00ff;
            text-shadow: 0 0 20px #ff00ff;
        }
        .generator {
            background: rgba(0, 255, 255, 0.1);
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        button {
            background: #ff00ff;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            border-radius: 5px;
            transition: all 0.3s;
        }
        button:hover {
            box-shadow: 0 0 20px #ff00ff;
            transform: scale(1.05);
        }
        .status {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            border-radius: 5px;
            color: #00ff00;
        }
        .error {
            background: rgba(255, 0, 0, 0.1);
            border-color: #ff0000;
            color: #ff0000;
        }
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
</head>
<body>
    <h1>ðŸŽµ Beanie Dash Audio Generator</h1>

    <div class="generator">
        <h2>ðŸŽ® Jump Sound</h2>
        <p>A quick, uplifting bounce sound</p>
        <div class="controls">
            <button onclick="playJumpSound()">â–¶ Preview</button>
            <button onclick="generateJumpSound()">ðŸ’¾ Generate & Save</button>
        </div>
        <div id="jump-status"></div>
    </div>

    <div class="generator">
        <h2>ðŸ’€ Death Sound</h2>
        <p>A descending, glitchy game over sound</p>
        <div class="controls">
            <button onclick="playDeathSound()">â–¶ Preview</button>
            <button onclick="generateDeathSound()">ðŸ’¾ Generate & Save</button>
        </div>
        <div id="death-status"></div>
    </div>

    <div class="generator">
        <h2>ðŸŽµ Background Music</h2>
        <p>Synthwave-style looping background track</p>
        <div class="controls">
            <button onclick="playBackgroundMusic()">â–¶ Preview (10s)</button>
            <button onclick="generateBackgroundMusic()">ðŸ’¾ Generate & Save</button>
        </div>
        <div id="background-status"></div>
    </div>

    <div class="generator">
        <h2>ðŸŽ¯ Generate All</h2>
        <p>Create all audio files at once</p>
        <button onclick="generateAll()">ðŸš€ Generate All Audio Files</button>
        <div id="all-status"></div>
    </div>

    <script>
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // Utility function to create a buffer from audio data
        function createWavBuffer(buffer) {
            const length = buffer.length;
            const arrayBuffer = new ArrayBuffer(44 + length * 2);
            const view = new DataView(arrayBuffer);

            // WAV header
            const writeString = (offset, string) => {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            };

            writeString(0, 'RIFF');
            view.setUint32(4, 36 + length * 2, true);
            writeString(8, 'WAVE');
            writeString(12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            view.setUint16(22, 1, true);
            view.setUint32(24, audioContext.sampleRate, true);
            view.setUint32(28, audioContext.sampleRate * 2, true);
            view.setUint16(32, 2, true);
            view.setUint16(34, 16, true);
            writeString(36, 'data');
            view.setUint32(40, length * 2, true);

            // Convert float samples to 16-bit PCM
            let offset = 44;
            for (let i = 0; i < length; i++) {
                const sample = Math.max(-1, Math.min(1, buffer[i]));
                view.setInt16(offset, sample * 0x7FFF, true);
                offset += 2;
            }

            return arrayBuffer;
        }

        // Download WAV file
        function downloadWav(filename, buffer) {
            const wavBuffer = createWavBuffer(buffer);
            const blob = new Blob([wavBuffer], { type: 'audio/wav' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Jump Sound - Quick upward sweep
        function createJumpSound() {
            const duration = 0.2;
            const sampleRate = audioContext.sampleRate;
            const numSamples = duration * sampleRate;
            const buffer = new Float32Array(numSamples);

            for (let i = 0; i < numSamples; i++) {
                const t = i / sampleRate;
                const frequency = 200 + (800 * (i / numSamples)); // Sweep from 200Hz to 1000Hz
                const envelope = Math.exp(-t * 10); // Quick decay
                buffer[i] = Math.sin(2 * Math.PI * frequency * t) * envelope * 0.3;

                // Add a second harmonic
                buffer[i] += Math.sin(4 * Math.PI * frequency * t) * envelope * 0.1;
            }

            return buffer;
        }

        function playJumpSound() {
            const buffer = createJumpSound();
            const audioBuffer = audioContext.createBuffer(1, buffer.length, audioContext.sampleRate);
            audioBuffer.copyToChannel(buffer, 0);

            const source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.connect(audioContext.destination);
            source.start();
        }

        function generateJumpSound() {
            const buffer = createJumpSound();
            downloadWav('jump.wav', buffer);
            document.getElementById('jump-status').innerHTML = '<div class="status">âœ… Jump sound generated! Save as assets/audio/jump.mp3</div>';
        }

        // Death Sound - Descending glitch
        function createDeathSound() {
            const duration = 0.8;
            const sampleRate = audioContext.sampleRate;
            const numSamples = duration * sampleRate;
            const buffer = new Float32Array(numSamples);

            for (let i = 0; i < numSamples; i++) {
                const t = i / sampleRate;
                const frequency = 800 * Math.exp(-t * 3); // Exponential frequency decay
                const envelope = Math.exp(-t * 2);

                // Main tone
                buffer[i] = Math.sin(2 * Math.PI * frequency * t) * envelope * 0.3;

                // Add noise/glitch effect
                if (Math.random() < 0.1) {
                    buffer[i] += (Math.random() - 0.5) * envelope * 0.2;
                }

                // Add sub-bass
                buffer[i] += Math.sin(2 * Math.PI * frequency * 0.25 * t) * envelope * 0.2;
            }

            return buffer;
        }

        function playDeathSound() {
            const buffer = createDeathSound();
            const audioBuffer = audioContext.createBuffer(1, buffer.length, audioContext.sampleRate);
            audioBuffer.copyToChannel(buffer, 0);

            const source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.connect(audioContext.destination);
            source.start();
        }

        function generateDeathSound() {
            const buffer = createDeathSound();
            downloadWav('death.wav', buffer);
            document.getElementById('death-status').innerHTML = '<div class="status">âœ… Death sound generated! Save as assets/audio/death.mp3</div>';
        }

        // Background Music - Simple synthwave loop
        function createBackgroundMusic() {
            const duration = 8; // 8 second loop
            const sampleRate = audioContext.sampleRate;
            const numSamples = duration * sampleRate;
            const buffer = new Float32Array(numSamples);

            const bpm = 120;
            const beatDuration = 60 / bpm;

            // Bass pattern (root notes)
            const bassPattern = [65, 65, 69, 69, 72, 72, 65, 65]; // Note frequencies

            for (let i = 0; i < numSamples; i++) {
                const t = i / sampleRate;

                // Determine current beat
                const beatIndex = Math.floor((t / beatDuration) % 8);
                const bassFreq = bassPattern[beatIndex];

                // Bass line
                const bass = Math.sin(2 * Math.PI * bassFreq * t) * 0.2;

                // Kick drum (on beats)
                const kickEnvelope = Math.exp(-((t % 0.5) * 20));
                const kick = Math.sin(2 * Math.PI * 55 * t) * kickEnvelope * 0.3;

                // Hi-hat (16th notes)
                const hihatEnvelope = Math.exp(-((t % 0.125) * 100));
                const hihat = (Math.random() - 0.5) * hihatEnvelope * 0.05;

                // Arpeggiator
                const arpFreq = bassFreq * 4 * (1 + Math.floor((t * 8) % 4) * 0.25);
                const arp = Math.sin(2 * Math.PI * arpFreq * t) * 0.05;

                // Mix everything
                buffer[i] = bass + kick + hihat + arp;

                // Soft clipping
                buffer[i] = Math.tanh(buffer[i] * 0.8);
            }

            return buffer;
        }

        function playBackgroundMusic() {
            const buffer = createBackgroundMusic();
            const audioBuffer = audioContext.createBuffer(1, buffer.length, audioContext.sampleRate);
            audioBuffer.copyToChannel(buffer, 0);

            const source = audioContext.createBufferSource();
            source.buffer = audioBuffer;
            source.connect(audioContext.destination);
            source.start();
        }

        function generateBackgroundMusic() {
            const buffer = createBackgroundMusic();
            downloadWav('background.wav', buffer);
            document.getElementById('background-status').innerHTML = '<div class="status">âœ… Background music generated! Save as assets/audio/background.mp3</div>';
        }

        function generateAll() {
            generateJumpSound();
            generateDeathSound();
            generateBackgroundMusic();
            document.getElementById('all-status').innerHTML = '<div class="status">âœ… All audio files generated! Convert WAV to MP3 and save in assets/audio/</div>';
        }

        // Auto-resume audio context on user interaction
        document.addEventListener('click', () => {
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
        });
    </script>
</body>
</html>